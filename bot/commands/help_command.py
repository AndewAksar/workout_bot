# bot/handlers/help_command.py
"""
–ú–æ–¥—É–ª—å: help_command.py
–û–ø–∏—Å–∞–Ω–∏–µ: –ú–æ–¥—É–ª—å —Å–æ–¥–µ—Ä–∂–∏—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help.
–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ —Å–ø–∏—Å–∫–æ–º –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥ –≤ –≤–∏–¥–µ —Å—Å—ã–ª–æ–∫.

–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- telegram: –î–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å Telegram API.
- telegram.ext: –î–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏ Telegram.
"""

from telegram import Update
from telegram.ext import ContextTypes
from telegram import (
    InlineKeyboardButton,
    InlineKeyboardMarkup
)

from bot.utils.message_deletion import schedule_message_deletion
from bot.utils.logger import setup_logging


logger = setup_logging()

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help
async def help(update: Update, context: ContextTypes.DEFAULT_TYPE) -> None:
    user_id = update.message.from_user.id
    chat_id = update.message.chat_id
    message_id = update.message.message_id

    try:
        help_text = (
            "üìã <b>–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã</b> ‚Äî –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏—Ö, –µ—Å–ª–∏ –∫–Ω–æ–ø–∫–∏ –ø–æ–¥"
            " —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã –∏–ª–∏ –≤—ã –ø—Ä–µ–¥–ø–æ—á–∏—Ç–∞–µ—Ç–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–π –≤–≤–æ–¥:\n\n"
            "‚Ä¢ <code>/start</code> ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ —É–≤–∏–¥–µ—Ç—å –≥–ª–∞–≤–Ω–æ–µ"
            " –º–µ–Ω—é. –ü–æ–ª–µ–∑–Ω–æ, –µ—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–Ω–æ–ø–∫–∞–º–∏ –±—ã–ª–∏ —É–¥–∞–ª–µ–Ω—ã.\n"
            "‚Ä¢ <code>/settings</code> ‚Äî –æ—Ç–∫—Ä—ã—Ç—å —Ä–∞–∑–¥–µ–ª –Ω–∞—Å—Ç—Ä–æ–µ–∫ —Å –ª–∏—á–Ω—ã–º–∏"
            " –¥–∞–Ω–Ω—ã–º–∏, –ø—Ä–æ—Ñ–∏–ª–µ–º –∏ –≤–µ—Å–æ–º.\n"
            "‚Ä¢ <code>/cancel</code> ‚Äî –ø—Ä–µ—Ä–≤–∞—Ç—å —Ç–µ–∫—É—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–≤–æ–¥"
            " –≤–µ—Å–∞ –∏–ª–∏ –¥–∏–∞–ª–æ–≥ —Å AI). –°–æ–æ–±—â–µ–Ω–∏–µ —Å –∫–æ–º–∞–Ω–¥–æ–π –∏—Å—á–µ–∑–Ω–µ—Ç —á–µ—Ä–µ–∑ –ø–∞—Ä—É"
            " —Å–µ–∫—É–Ω–¥, —ç—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ.\n\n"
            "‚Ä¢ <code>/register</code> ‚Äî –Ω–∞—á–∞—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –Ω–∞ Gym-Stat –ø—Ä—è–º–æ –≤"
            " —á–∞—Ç–µ. –ë–æ—Ç —à–∞–≥ –∑–∞ —à–∞–≥–æ–º –ø–æ–ø—Ä–æ—Å–∏—Ç –ª–æ–≥–∏–Ω, email –∏ –ø–∞—Ä–æ–ª—å.\n"
            "‚Ä¢ <code>/login</code> ‚Äî –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞—Ç—å—Å—è –Ω–∞ Gym-Stat, —á—Ç–æ–±—ã –∑–∞–≥—Ä—É–∑–∏—Ç—å"
            " –ø—Ä–æ—Ñ–∏–ª—å –∏ –∏—Å—Ç–æ—Ä–∏—é –≤–µ—Å–∞.\n"
            "‚Ä¢ <code>/delete_data</code> ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–¥–∞–ª–∏—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ"
            " (Telegram + Gym-Stat —Ç–æ–∫–µ–Ω—ã).\n"
            "‚Ä¢ <code>/contacts</code> ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ –≤–ª–∞–¥–µ–ª—å—Ü–∞ –±–æ—Ç–∞.\n\n"
            "‚ÑπÔ∏è <b>–°–æ–≤–µ—Ç:</b> –ø–æ—á—Ç–∏ –≤—Å–µ —Å–ª—É–∂–µ–±–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –±–æ—Ç —É–¥–∞–ª—è–µ—Ç —á–µ—Ä–µ–∑"
            " 5‚Äì15 —Å–µ–∫—É–Ω–¥. –ï—Å–ª–∏ –Ω–µ —É—Å–ø–µ–ª–∏ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É ‚Äî –≤–≤–µ–¥–∏—Ç–µ"
            " –∫–æ–º–∞–Ω–¥—É –µ—â—ë —Ä–∞–∑, –æ–Ω–∞ –ø–æ—è–≤–∏—Ç—Å—è –ø–æ–≤—Ç–æ—Ä–Ω–æ."
        )

        await update.message.reply_text(help_text, parse_mode="HTML")

        # –ü–ª–∞–Ω–∏—Ä—É–µ–º —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –∫–æ–º–∞–Ω–¥–æ–π /help
        logger.info(f"–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è —É–¥–∞–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è {message_id} –≤ —á–∞—Ç–µ {chat_id}")
        schedule_message_deletion(
            context,
            [message_id],
            chat_id=chat_id,
            delay=5
        )

    except Exception as e:
        logger.error(f"–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∫–æ–º–∞–Ω–¥—ã /help: {e}")
        await update.message.reply_text(
            "‚ùå –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —Å–Ω–æ–≤–∞ –ø–æ–∑–∂–µ.",
            parse_mode="HTML"

        )
